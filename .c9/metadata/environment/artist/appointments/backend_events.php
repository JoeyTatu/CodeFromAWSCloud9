{"changed":true,"filter":false,"title":"backend_events.php","tooltip":"/artist/appointments/backend_events.php","value":"<?php\nrequire_once '_db.php';\n\n$stmt = $db->prepare('SELECT * FROM Appointment WHERE NOT ((end <= :start) OR (start >= :end))');\n\n$stmt->bindParam(':start', $_GET['start']);\n$stmt->bindParam(':end', $_GET['end']);\n\n$stmt->execute();\n$result = $stmt->fetchAll();\n\nclass Event {}\n$events = array();\n\nforeach($result as $row) {\n  $e = new Event();\n  $e->id = $row['id'];\n  $e->text = $row['client_name'];\n  $e->start = $row['start'];\n  $e->end = $row['end'];\n  $events[] = $e;\n}\n\nheader('Content-Type: application/json');\necho json_encode($events);\n\n?>\n","undoManager":{"mark":-2,"position":1,"stack":[[{"start":{"row":3,"column":36},"end":{"row":3,"column":42},"action":"remove","lines":["events"],"id":2},{"start":{"row":3,"column":36},"end":{"row":3,"column":48},"action":"insert","lines":["Appointment "]}],[{"start":{"row":3,"column":47},"end":{"row":3,"column":48},"action":"remove","lines":[" "],"id":3}]]},"ace":{"folds":[],"scrolltop":180,"scrollleft":0,"selection":{"start":{"row":3,"column":47},"end":{"row":3,"column":47},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1576678858527}